@using StoneDesafio.Enum
@using StoneDesafio.Services
@model StoneDesafio.Models.FaseCampeonato

@{
    var listaJogos = (List<Jogo>)ViewData["ListaJogos"];
}

<h1>Editar fase @FaseTradutor.Traduzir(Model.FaseAtualCampeonato)</h1>

<div class="row">
    <div class="col-md-4">
        <form asp-action="editar">
            <input asp-for="Id" class="d-none"/>
            <div id="jogos">
                @for (var i = 0; i < Model.Jogos.Count; i++)
                {
                    var selectList = new SelectList(listaJogos, "Id", "Nome");
                    <div id="jogo">
                        <label asp-for="Jogos" class="control-label">Jogo @(i + 1)</label>
                        @Html.DropDownListFor(
                        model => model.Jogos,
                        selectList,
                        "Selecione...",
                        new {
                        @class = "dropdown-toggle form-control",
                        style = "width: 100%",
                        @required = false,
                        id = "select",
                        @tabindex = "0",
                        }
                        )
                        <span asp-validation-for="Jogos" class="text-danger"></span>
                    </div>
                }
            </div>
            <div class="mt-1">
                <input type="button" value="+" class="btn-sm btn-success" onclick="AddJogo()" />
            </div>
            <br>
            <div class="form-group mt-2">
                <input type="submit" value="Editar" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>
<hr>
<br>
<div>
    <a asp-action="Index">Voltar</a>
</div>

<script>
    const _jogoClone = document.querySelector("#jogo").cloneNode(true);
    const _jogosContainer = document.querySelector("#jogos");
    let _jogosCount = 1;
    console.log("started");
    _jogoClone.children[1].value = "";

    function AddJogo() {
        const clone = _jogoClone.cloneNode(true);
        clone.firstElementChild.textContent = "Jogo " + ++_jogosCount;

        _jogosContainer.appendChild(clone);

        clone.children[1].focus();
    }
    document.querySelectorAll("select").value = 1

</script>
